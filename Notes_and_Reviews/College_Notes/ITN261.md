# Chapter 1

### Good guys
- InfoSec professionals who engage in hacking to mitigate them and make a system more secure and resistant to attacks

### Amateurs
- Beginner hackers who use software and scripts from experienced hackers

### Criminals
- Hackers who use malicious software, techniques, and devices to carry out illegal activity for financial gain

### Ideologues
- Hackers who conduct hack activities to achieve their ideological or political goals

### Nation-state actors
- Cybercriminals who are directly trained and supported by nation-states have a large budget and are tasked to carry out cyberwarfare operations.


---

## Controls

### Technical
- Software or hardware devices, such as firewalls, proxies, intrusion detection systems (IDSs), intrusion prevention systems (IPSs), and biometric authentication. Permissions, auditing, and similar technologies

### Administrative
- Policies and procedures

### Physical
- Doors, locks, cameras, security guards, lighting, fences, gates

---

## The Hacker Mindset
- Victimless crime
- Robin Hood ideal
- National pride and patriotism
- Educational value of hacking
- curiosity

---

## Motivation of Hackers

### Means
- does the attacker have the ability to commit the crime in question?

### Motive
- does the attacker have a reason to commit the crime

### Opportunity
- does the attacker have the necessary access and time to commit the crime

### Beneficial contribution
- hackers with motives are not criminals. what ethical hackers are InfroSec professionals who want to make their organization safe and secure

### Status/validation
- many of todays hackers aim to status, each successful attack gives them more status and elevates their reputation

### Monetary gain
- most of today's attacks are specifically targeted to either generate revenue for the attacker or deny revenue to the target

### Ideology
- hackers use technology to ideological goals. they are labeled as hacktivists. they can also be nationalist and nation-state actors.

---

## History of Hacking

### 1970s
- Mainframe hacking

### 1988
- first internet worm introduced by Robert T, Morris

### 1995
- first website defacement

### late 1990s/early 2000s
- malicious hacking has greatly increased for financial gain

### Last 2 decades
- hacking community adopter a new team ethic or workstyle leadership

## Ethical hacking and penetration testing

### an ethical hacker requires permission and a contract to engage in penetration testing

### Penetration Testing
- the methodical means of investigating, uncovering, attacking, and reporting on a target's strengths andvulnerabilitiess
- The primary goal is to determine whether a specific resource can be compromised

### Black-box testing
- Used to simulate how attackers view system
- no knowledge of system provided to testing team

### white-box testing
- advances knowledge provided to testing team

---

## The Role of Ethical Hacking
- Use skills and knowledge acquired through training experience to develop and understand a hacker's mindset and simulate hostile attacks
- requires permission from the victim
- Use the same strategies as malicious hacker
- Use a car to avoid harming the system
- need advanced knowledge of hacker techniques
- establish rules of engagement

---

## Common Hacking Methodologies

### Reconnaissance
- an attacker passively acquires info about the intended victim and/or the victim's SMS system

### Scanning
- an attacker takes the info obtained during the reconnaissance phase and uses it to acquire more detailed information about a victim

### Infiltration and Escalation
-An attacker uses the information gathered during the scanning phase to attempt to exploit the identified vulnerabilities

### Exfiltration
- An attacker gains elevated or unrestricted access to an environment where they can then access protected data, resources, and info

### Access extension
- attacker installs additional exploits (rootkits or other tools) so that they can access the system in the future

### Assault
- The assault phase is not present in all types of attacks
- When present, the attacker exfiltrates confidential data
- The attacker will likely skip any overt destructive actions

### Obfuscation
- For attackers who want to be clandestine, obfuscation is the phase in which they cover their tracks

---

## Performing a Penetration Test

### Technical attack
- designed to simulate an attack against technology from either the inside or the outside, depending on the goals and intentions of the client

### Administrative attack
- designed to find loopholes or shortcomings in how tasks and operational processes are performed

### Physical attack
- includes anything that targets physical equipment and facilities with actions such as theft, breaking, and entering, or similar actions
- can also include actions against people, such as social engineering-related threats

- After an org and the ethical hacker have discussed each test, determined its suitability, and evaluated its advantages and side effects, they can plan and contract, and perform the testing
- The testing team should include members with different but complementary skills from the business and technical domains

---

## The Role of the Law and Ethical Standards

### Trust
- The client places trust in the ethical hacker to use proper direction when performing tests
- If the ethical hacker breaks trust, it can degrade trust in other aspects, such as the reported results of tests

### legal implications
Violating limits defined by the permitted scope of testing may be sufficient cause for the client to take legal action against the ethical hacker
-If violating the test score results in damages, the defendant may be compelled to take legal action

### 1986 US computer fraud and abuse act
- includes issues like, altering, damaging, or destroying info in a federal computer and trafficking in computer passwords if it affects interstate or foreign commerce or permits unauthorized access to a government computer

### 1986 US electronic communication privacy act
- prohibits eavesdropping or the interception of a message without distinguishing between private and public systems

### 2002 Sarbanes-Oxley Act (SOX)
- a corporate governance law that affects public financial reporting
- under SOX, corporations must certify the accuracy and integrity of their financial reporting and accounting

### 2014 Federal Information Security Modernization Act (FISMA 2014)
- Updates requirements created by FISMA 2002, particularly surrounding the
Department of Homeland Security authority
- Amends Office of Management and Budget (OMB) oversight over InfoSec practices
and seeks to reduce “inefficient and wasteful reporting” to the OMB

### 2018 European Union (EU) General Data Protection Regulation (GDPR)
- Became the law governing the privacy of personal information for any EU citizen,
regardless of the location of data processing or storage.
- While many laws and regulations limit penetration testing activities, GDPR’s
Requirements to find and report vulnerabilities provide organizations with an
additional incentive to carry out penetration testing as a compliance activity.

---

# The Role of Protocols
- A set of rules whcih communications takes place
- enable dissimilar systems to communicate quickly, easily, and efficiently
- Provide almost guaranteed transparent interoperability
- Global standard allow universal interoperability

---

## Layer 1: Physical layer
- defines the electrical and mechanical requirements used to transmit information to an from systems across a transmission medium
  - Cable, fiber, or the air when using radio waves
- Reveals how, how much, and how long info is sent

- doesn't provide understanding of info being transmitted

---

## Layer 2: Data Link Layer
- provides for the initial framing, formatting, and general organization of data prior ro handing it off to the physical layer for transmisson

### Frame
- A container into which data is placed for transmission and delivery
- most common tyoe of frames travel along ethernet networks

### Flow control
- Mechanism that manages data flow between network nodes

---

## Layer 3: Network Layer
- Handles logical addressing and routing of traffic.
- Internet Protocol (IP) addressesrepresent logical addresses.
- Important to understand how attackers can manipulate data at this layer and how  to implement security controls to stop them.

---

## Layer 4: Transport Layer
- Ensures data is sent completely andcorrectly through use of error recovery and flow control
- Guarantees link between nodes and delivery of data
- Responsible for communication between host computers
- Verifies sender and receiver are ready to initiate data transfer
- Widely used protocols are TCP and UDP
- **Transmission Control Protocol (TCP)**
  - Connection oriented
  - Provides reliable communication through the use of handshaking, acknowledgments, error detection and session teardown

- **User Datagram Protocol (UDP)**
  - Connectionless
  - Offers speed and low overhead as its primary advantages


---

## Layer 5: Session Layer
- Responsible for the creation, termination, and management of a given connection
- Makes sure that creation and destruction of the connection occur properly
- Includes protocols such as Remote Procedure Call (RPC), Secure Shell (SSH), and Network File System (NFS)

---

## Layer 6: Presentation Layer
- Data is put into a format that programs operating at the Application
Layer can understand and use.
- Gateway services allow for sendingand receiving data between different networks that use different protocols.
- Encryption and decryption services
  - Encryption provides the capability to keep information confidential and verify the integrity of information
 
---

## Layer 7: Application Layer
- Supports several services used byapplication software and other services running on a system.
- Is the point at which application software, like email or a web browser, accesses network services.
- Think of application software as a microwave oven and the Application Layer as the electrical outlet that the microwave plugs into to get power.

---

## OSI Model Layers and Services
- Application: BitTorrent, DNC, DSNP, DHCP, FTP, HTTP(S), IMAP, MIME, NNTP, NTP,
POP3, RADIUS, RDP, SMTP, SOAP, Telnet
- Presentation: AFP, SSL, TLS
- Session: L2F, L2TP, NetBIOS, NFS, RPC, SMB, SSH
- Transport: AH (over IP/IPSec), BGP, ESP (over IP/IPSec), TCP, UDP, SPX
- Network: ICMP, IGMP, IGRP, IPv4, IPv6, IPSec, IPX, GRE, OSPF, RIP
- Data Link: ARP, Ethernet (IEEE 802.3), FDDI, Frame Relay, IND, L2TP, PPP, MAC, NPD, RARP, STP, Token Ring, VLAN, Wi-Fi (IEEE 802.11), WiMax (IEEE 802.16), X.25
- Physical: Bluetooth, DSL, Ethernet Physical Layer, USB, Wi-Fi Physical Layer

---

## TCP/IP: A Layer-by-Layer Review

### Transmission Control Protocol/Internet Protocol (TCP/IP)
- Is a large suite of protocols
- Protocols that generally serve as the foundation of the TCP/IP collection: IP, DNS,
TCP, UDP, ICMP, and ARP

### The TCP/IP model is an alternative to the Open Systems Interconnection (OSI) model.

### The TCP/IP model defines four layers:
- Application Layer
- Host-to-Host Layer
- Network or Internet Layer
- Physical or Network Access Layer

---

## TCP/IP Model: Physical or Network Access Layer

### Equipment
- Repeaters
- Hubs
- Bridges
- Switches

## Protocols
- Address Resolution Protocol (ARP)
- Reverse Address Resolution Protocol (RARP)
- Neighbor Discovery Protocol (NDP)
- Inverse Neighbor Discovery (IND)
- Transport Layer Security (TLS)
- Layer 2 Tunneling Protocol (L2TP)
- Point-to-Point Protocol (PPP)
- Serial Line Interface Protocol (SLIP)

### Threats
- Spoofing MAC addresses
- Poisoning MAC address resolution
- Wiretapping
- Interception
- Eavesdropping

### Controls
- Fiber optic cable
- Wi-Fi Protected Access (WPA)
- Wi-Fi Protected Access 2 (WPA2)
- Wi-Fi Protected Access 3 (WPA3)
- Point-to-Point Tunneling Protocol (PPTP)
- Challenge Handshake Authentication Protocol (CHAP)

### Equipment: Routers
- Do not forward broadcast packets
- Forward multicast packets
- Have the highest latency
- Offer the most flexibility
- Make forwarding decisions based on the destination IP address
- Require configuration

### Routing protocols
- Routing Information Protocol (RIP)
- Open Shortest Path First (OSPF)
- Intermediate System to Intermediate System (IS-IS)
- Enhanced Interior Gateway Routing Protocol (EIGRP)
- Border Gateway Protocol (BGP)

---

### Internet Protocol (IP):
- Is central to addressing and routing functions
- Is a routable protocol designed to make the best effort at delivering information
- Organizes data into a packet, prepares it for delivery, and places source and destination addresses on the packet
Is responsible for adding the time to live (TTL) information to a packet

### Each device’s IP address includes information that reveals how routing and other functions take place.
- One part of the IP address refers to the network, and the other refers to the host.

---

## IPv4 Addresses
- 4-byte (32-bit) numbers expressed as four subgroups of numbers, called octets
- Each subgroup represents 8 bits
- Dotted decimal notation
- IPv4 address example: 192.168.1.199

---

## IPv6 Addresses
- IPv6 address example:
 - 2600:1700:131:1ba0:4894:d6fa:7e7e:75cf
- IPV6 enhancements:
 - Subnetting support in the address format
 - Hierarchical addressing schemes
 - Simplified packet headers
 - Multicast allows for multiple destinations
 - Includes IP security

---

## Internet Control Message Protocol (ICMP)
- Designed for network diagnostics and to report logical errors.
- Protocol is present on all networks.
- Two current versions: ICMPv4 and ICMPv6.
- Attackers routinely attempt to leverage ICMP vulnerabilities to carry out attacks.
- ICMP messages follow a basic format:
  - First byte of an ICMP header indicates the type of ICMP message.
  - Next byte contains the code for each particular type of ICMP.

---

## TCP/IP Model: Network or Internet Layer Threats

### Sniffers
- Hardware or software-based devices that view or record traffic flows over the network.
- Sensitive data can be viewed using a sniffer.
- Promiscuous mode allows a sniffer to capture any packet it can see.
- Wireshark is the most widely used sniffer.

### Internet Protocol Security (IPSec)
- Most widely used standard for protecting IP datagrams
- Is integral to IPv6 and keeps data confidential during transit

### Packet filters
- Must be configured through access control lists (ACLs).
- ACLs enable rules that allow or block traffic based on packet headers.

### Network address translation (NAT)
- Originally addressed a need for more IPv4 addresses
- Is used to translate between public and private addresses

---

## TCP/IP Model: Host-to-Host Layer
- Provides end-to-end delivery for network messages.
- Maps to OSI Layers 4 and 5.
- Segments the data it receives from the layer above it and adds a checksum to properly validate data to ensure it has not been corrupted.
  - A decision must be made here to send the data with TCP or UDP, depending on the
specific application.
- Two primary protocols at this layer are TCP and UDP.

---

## TCP/IP Model: Host-to-Host Layer

### TCP
- A connection-oriented protocol that provides reliable data delivery, flow control, sequencing, and a means to handle startups and shutdowns
- Uses a three-step handshake at the beginning of a session
- During data transmission, guarantees delivery of data using sequence and acknowledgment numbers
- At completion, shuts down session

---

## TCP/IP Model: Host-to-Host Layer Threats

### Port scanning
- A technique in which a message is sent to each port, one at a time. By examining the response, the attacker can determine weaknesses in the applications being probed and determine what to attack.

### Session hijacking
- A type of attack in which the attacker places themself between the victim and the server. The attack is made possible because authentication typically is done only at the start of a TCP session.

### SYN attack
- A distributed denial of service (DDoS) attack in which the attacker sends a succession of SYN packets with a spoofed return address to a targeted destination
IPv4/IPv6 device but does not send the last ACK packet to acknowledge and
confirm receipt. Eventually, the target system runs out of open connections and cannot accept any legitimate new connection requests.

---

## TCP/IP Model: Host-to-Host Layer Controls

### Secure Sockets Layer (SSL)
- An older security-oriented protocol, SSL is considered application independent and can be used with Hypertext Transfer Protocol (HTTP), File Transfer Protocol (FTP), and Telnet to run on top of it transparently. SSL uses a public key cryptography system based on the RSA algorithm that is named after its authors, Rivest, Shamir,
and Adleman.
## Transport Layer Security (TLS)
- TLS is an upgrade to SSL and is backward compatible, but they do not interoperate. TLS, much like SSL, is designed to be application independent.

## SOCKS
- This is another security protocol developed and established by Internet standard RFC 1928. It allows client/server applications to work when separated by one or more firewalls.
## Secure RPC (S/RPC)
- This adds a layer of security onto the RPC process by adding Data Encryption Standard (DES) encryption.

---

## TCP/IP Model: Application Layer
 
- Maps to OSI Layers 5, 6, and 7
- Interacts with applications that need access to network services

## Application Layer services:
- Domain Name System (DNS) converts fully qualified domain names (FQDNs) into numeric IP addresses; uses TCP and UDP.
- File Transfer Protocol (FTP) moves files from one computer to another.
- Hypertext Transfer Protocol (HTTP) uses a request response protocol in which a
client sends a request and a server sends a response; used across the Internet
- Simple Network Management Protocol (SNMP) is a UDP service; offers encryption.

## Application Layer services:
- Telnet is a TCP service; enables a client at one site to establish a session with a
host at another site.
- Simple Mail Transfer Protocol (SMTP) is a TCP service; designed for exchange of electronic mail between networked systems.
- Trivial File Transfer Protocol (TFTP) transfers router configuration files and is used by cable companies to configure cable modems; requires no authentication.

---

## TCP/IP Model: Application Layer Threats and Controls

### Threats
- Malware
- Trojan horse
- Spyware
- Virus
- Worm
- Ransomware

## Denial of service (DoS) attack
- Distributed DoS (DDoS) attack
- Botnets

## Controls
- Malware scanners
- Secure Shell (SSH)
- Pretty Good Privacy (PGP)
- Secure/Multipurpose Internet Mail Extension (S/MIME)


---

# Chapter 2 - Linux OS

### Linux
- Linux is open source -> anyone can browse, and change the source code
- free and open source doesn't mean it's weak or limited than commercial OS
- Offers a Graphical User Interface and the features of the most advanced OSs
- Not always free, others might be purchased like Windows
  - **General Public License (GPL)** makes the source code still available
---

### Graphical User Interface (GUI)
- lets you click icons on a screen rather than putting commands in a prompt
- similar top macOS and Windows

---

### Common Linux distributions
- Ubuntu
- Mint
- Arch Linux
- CentOS (Community Enterprise Operating System)
- FreeBSD
- Fedora
- Gentoo
- openSUSE
- Debian

---

### Kernel
- main component of the OS
- controls all of the low level system functions
  - resource management, input and output operations, and the central processing unit (CPU)
- said to dictate the behavior of the OS
- You'll interact with the kernel through a shell
  - Shell allows users to interact with the OS
  - interacts with devices, like hard drives, ports, and CPUs
- Linux has multiple Kernels unlike commerical OS who has one

---

### Kali Linux
- built on Debian Distribution
- designed for hacking or penetrating target networks or systems
- used by pros in IT and security
- not designed for desktop replacement
- open source, anyone can contribute
- most popular and available distribution for hackers

---

### Basics of Linux
- You can operate Linux through any available GUIs
- **Command-Line Interface (CLI)**
  - involves putting text commands rather than clicking on icons
- In Linux not uncommon to use both approaches
- CLI only way to carry out advanced operations

---

### Linux Navigation
- windows vs. linux file and drive
  - Windows: Drives letters
  - Linux: Drives and partition are refrenced using paths and file names
    - Ex: `/dev/hda1/file`
- Disk drives -> Devices referenced under /dev directory
- physical drive has a separate subdirectory, linux uses that to refer to the device driver
- `hda1` subdirectory refers to the first physical disk connected to the Serial Advanced Technology Attachment (SATA) interface
  - linux directories are refrenced with a forward slash /
    - backslash special charecter, not a directory separator

---

### Directory Purpose
- /: "root' or the basic part of the file system. Similar to C: in Windows
- /bin: all executables in the directory are usable and accessible by all system, users. similar to Windows folder.
- /boot: has all the files required to start up and boot a linux OS
- /dev: Files that dictate the acces between hardware and the OS resides. can be thought as device drivers.
- /etc: Files that store configurations info for applications. Apps can store some info in their own directories
- /home: users store their info by default. Usually, their info is stored in special subdirectories
- /lib: Library files; libraries are shared code that is incorporated into an application later on demand
- /mnt: some temporary file systems are normally placed here when a device is activated. Ex: you insert a CD or DVD into the optical driver, the Os may connect to the CD/DVD file system and display the files and directories under /mnt/cdrom or /mnt/dvd
- /opt: used at the admins discretion usually used for 3rd party software
- /proc: contains important info about running processes on the linux system
- /sbin; system binaries directory: contains executable that are used by the OS and the admins but usually no by normal users
- /tmp: temporary directory for general use by any user
- /usr: generic directory that contains the body of useful folder and files for use by linux users, such as executables and documentations
- /var: contains system variables, such as print and mail spoolers, log files and process IDs.

---

### Commonly used commands
- `[root@impa /]#`
  - root: user account that logged in
  - impa: computers name
  - /: current directory
  - #: user account holds privileges
  - $: user account with standard privileges

---

### Basic Command Structure of Linux
- once learning the basics, you can combine multiple commands together to carry out sophisticated tasks
  - ex: `command <option(s)> <argument(s)>`
  - this identifys the command you want linux to run and info that tells the command what to do
  - keep in mind: generally consist of lowercases, letters, and digits. ex: ls is not thensame as LS
  - options modify the way that command works. for example, -a option of the ls command causes the output of the command to list "hidden" files as well as normal files
    - ex: `root@impa:/# ls -a` & `root@impa:/# ls -al
  - both use hidden files, but different output formats
- Next is a list of one or more arguments
  - Arguments are used to specify filenames or other info that fine tune the action of the command
  - `ls` -> lets you specify a directory as an argument -> tells the command to list files in that directory
  - ex: `root@impa:/# ls /bin

---

### Linux Commands
- `ls`: similar to `dir` on Windows. `ls` is used to show all the files and subdirectories in a given location
- `pwd`: windows use `cd` with no arguments. `pwd` or prin working directory, is used to show the current location, called the directory, of the user withint the linux directory structure. this command is very useful, even for noobs, who can get lost in linux file system
- `cd`: knowns as change directory, is used to switch between directories in Linux. this command is identical in operation to the windows version. the main difference is the way directories are refrenced.
  - / root of the file
  - ./ current directory
  - ../ parent directory (the directory above)
  - ~ home directory
- `mkdir`: `cd <location name>`, the make directory or `mkdir` is used to make a new directory in Linux. The format is: `mkdir <new directory name>`
- `rmdir`: remove directory, is used to remove or delete empty directories from the Linux file system. directory must be empty, or else youll just get an error. format: `rmdir <directory name>`
- `rm`: diffrence between `rmdir` and `rm` is `rm` will delete a directory that is not empty so be mindful. format: `rm <directory name>`
- `cp`: Command used to copy files from location to  location. format: `cp < original location> <new location>`
- `mv`: used to move files from one location to another location. format: `mv <original location> <new location>`

---

### Wildcard characters in Linux
- Wildcards are:
  - Special characters that match multiple characters
  - Not unique to Linux
- The question mark (?) character matches exactly one character.
- The asterisk (*) character matches zero or more characters.
- *.log would match all filenames that end in .log
- This command copies all log files to a desired location:
  - `root@impa:/#cp /etc/logs/*.log ~/logfiles`

---

### Live CDs/DVDs
- you can burn the OS to a CD or DVD and boot from that medium w/o having to install the OS on the computer first
- Bootable versions are called a **live CD/DVD**
- Live CD/DVD
  - A removable disk that contains a complete and bootable OS
  - Can run a fully featured, fully functional OS
  -  Provides same experience as if the OS is installed on the computer hard drive
- allows you to boot a computer without making alterations to existing OS
- May use to troubleshoot hardware failures or recover a corrupted OS
- Common uses of live Linux distributions:
  - Installing Linux on a new system
  - Testing new software
  - Evaluating hardware configurations
  - Repairing damaged systems
  - Providing guest systems
  - Providing portable systems
  - Cracking, stealing, or resetting passwords
  - Conducting penetration testing
  - Multibooting
  - Performing forensic investigations
  - Providing a secure, unalterable OS
  - Setting up kiosks
  - Creating persistent desktops
 
  ---

  ### Special Purpose Live CD/DVDs
- Live CDs/DVDs:
  - May be generic, specific, or purpose built
  - Provide everything needed to install and run Linux
- Special-purpose CDs/DVDs:
  - Built to fulfil a unique need
  - May lack the capability to install and run Linux
- Common purpose-built distributions include:
  - Firewalls
  - Rescue disks
  - Password resets (such as Trinity)
  - Kali

---

### Virtual Machines
- Most security professionals use Kali as a virtual machine (VM).
- VMs provide the ability to run on a host computer without installing Kali or boot from alternative media.
- VMs allow you to load Kali, examine a running computer, pause it, and then restart at will.
- Linux VM provides flexibility and software availability.
